import{o as gt,V as vt,D as o,k as B,m as yt,L as kt,T as wt}from"./lf-core-C0TwNeAf.js";import{a5 as Ft,C as _t,c as xt,a6 as Ot,l as zt,n as St,a7 as Ht,a8 as $t,a9 as qt,aa as Yt,ab as Jt,ac as Kt,ad as Xt,ae as Zt,af as y}from"./theme.constants-_3bg_1Hx.js";import{o as Ct}from"./p-558ec216-av2_KWVh.js";import"./preload-helper-C1FmrZbK.js";const Dt=async e=>{var c,d,p;const{get:t,set:r}=e.controller,{compInstance:a,history:i,manager:s}=t,{lfEndpointUrl:n}=a,{debug:l,llm:f}=s;try{const m=Gt(e),g=await f.fetch(m,n),v=(p=(d=(c=g.choices)==null?void 0:c[0])==null?void 0:d.message)==null?void 0:p.content,_={role:"assistant",content:v};r.history(()=>i().push(_))}catch(m){l.logs.new(a,`Error calling LLM: ${m}`,"error")}},Lt=async e=>{const{compInstance:t,history:r}=e.controller.get,{lfContextWindow:a,lfSystem:i}=t;if(!a)return 0;let s=i?i.length/4:0;return r().forEach(n=>s+=n.content.length),(s?s/4:0)/a*100},Ut=async e=>{const{textarea:t}=e.elements.refs.chat;requestAnimationFrame(async()=>{await t.setValue(""),await t.setFocus()})},Gt=e=>{const{compInstance:t,history:r}=e.controller.get,{lfMaxTokens:a,lfSeed:i,lfSystem:s,lfTemperature:n}=t,l=[];s&&l.push({role:"system",content:s});for(const f of r())l.push({role:f.role,content:f.content});return{temperature:n,max_tokens:a,seed:i,messages:l}},jt=async e=>{const{set:t}=e.controller;requestAnimationFrame(async()=>{t.currentPrompt(null),Ut(e)})},Vt=async e=>{const{get:t,set:r}=e.controller,{history:a}=t,i=await t.newPrompt();if(requestAnimationFrame(()=>{r.currentPrompt(i)}),i){const s=a();r.history(()=>s.push(i)),await Dt(e)}jt(e)},Qt=e=>({clear:()=>{const{controller:t,elements:r,handlers:a}=e(),{blocks:i,currentPrompt:s,cyAttributes:n,manager:l,parts:f}=t.get,{button:c}=a.chat,{chat:d}=r.refs,{assignRef:p,theme:m}=l,{bemClass:g,get:v}=m,{"--lf-icon-clear":_}=v.current().variables;return o("lf-button",{class:g(i.chat._,i.chat.clear),"data-cy":n.button,id:y.chat.clear,lfIcon:_,lfLabel:"Clear",lfStyling:"flat",lfUiState:s()?"disabled":"danger","onLf-button-event":c,part:f.clear,ref:p(d,"clear"),title:"Clear the textarea."})},configuration:()=>{const{controller:t,elements:r,handlers:a}=e(),{blocks:i,cyAttributes:s,manager:n,parts:l}=t.get,{chat:f}=r.refs,{button:c}=a.chat,{assignRef:d,theme:p}=n,{bemClass:m,get:g}=p;return o("lf-button",{class:m(i.chat._,i.chat.configuration),"data-cy":s.button,id:y.chat.configuration,key:y.chat.configuration,lfIcon:g.current().variables["--lf-icon-settings"],lfLabel:"Configuration",lfStyling:"outlined","onLf-button-event":c,part:l.configuration,ref:d(f,"configuration")})},messageBlock:(t,r)=>{const{controller:a}=e(),{blocks:i,compInstance:s,manager:n}=a.get,{lfTypewriterProps:l}=s,{sanitizeProps:f,theme:c}=n,{bemClass:d}=c,p=!(r!=="assistant"||typeof l!="object"||l===null),m=d(i.messages._,i.messages.paragraph);return p?o("lf-typewriter",{class:m,...f(l,"LfTypewriter"),lfUpdatable:!1,lfValue:t}):o("div",{class:m},t)},progressbar:()=>{const{controller:t,elements:r}=e(),{chat:a}=r.refs,{blocks:i,compInstance:s,currentTokens:n,manager:l}=t.get,{lfContextWindow:f}=s,{assignRef:c,theme:d}=l,{bemClass:p,get:m}=d,g=n(),v=`Estimated tokens used: ${g}/${f}`;return o("lf-progressbar",{class:p(i.input._,i.input.progressbar),lfCenteredLabel:!0,lfIcon:m.icon("percentage60"),lfLabel:"Context window",lfValue:g,ref:c(a,"progressbar"),title:v})},send:()=>{const{controller:t,elements:r,handlers:a}=e(),{blocks:i,currentPrompt:s,cyAttributes:n,manager:l,parts:f}=t.get,{chat:c}=r.refs,{button:d}=a.chat,{assignRef:p,theme:m}=l,{bemClass:g}=m,v=!!s();return o("lf-button",{class:g(i.chat._,i.chat.send),"data-cy":n.button,id:y.chat.send,lfIcon:"check",lfLabel:"Send",lfShowSpinner:v,"onLf-button-event":d,part:f.send,ref:p(c,"send"),title:"Send your prompt (CTRL + Enter)."},o("lf-spinner",{lfActive:v,lfDimensions:"0.6em",slot:"spinner"}))},settings:()=>{const{controller:t,elements:r,handlers:a}=e(),{blocks:i,cyAttributes:s,manager:n}=t.get,{chat:l}=r.refs,{button:f}=a.chat,{assignRef:c,theme:d}=n,{bemClass:p}=d;return o("lf-button",{class:p(i.input._,i.input.button),"data-cy":s.button,id:y.chat.settings,lfIcon:"settings",lfStretchY:!0,lfStyling:"flat","onLf-button-event":f,ref:c(l,"settings")})},spinner:()=>{const{controller:t,elements:r}=e(),{currentPrompt:a,manager:i}=t.get,{chat:s}=r.refs,{assignRef:n}=i,l=!!a();return o("lf-spinner",{lfActive:l,lfBarVariant:!0,ref:n(s,"spinner")})},stt:()=>{const{controller:t,elements:r,handlers:a}=e(),{blocks:i,cyAttributes:s,manager:n,parts:l}=t.get,{chat:f}=r.refs,{button:c}=a.chat,{assignRef:d,theme:p}=n,{bemClass:m,get:g}=p,v=g.icon("microphone");return o("lf-button",{class:m(i.commands._,i.commands.stt),"data-cy":s.button,id:y.chat.stt,lfIcon:v,lfStyling:"icon","onLf-button-event":c,part:l.stt,ref:d(f,"stt"),title:"Activate Speech To Text with your browser's API (if supported)."})},textarea:()=>{const{controller:t,elements:r}=e(),{blocks:a,currentPrompt:i,cyAttributes:s,manager:n,parts:l}=t.get,{chat:f}=r.refs,{assignRef:c,theme:d}=n,{bemClass:p}=d;return o("lf-textfield",{class:p(a.input._,a.input.textarea),"data-cy":s.input,id:y.chat.prompt,lfStretchX:!0,lfLabel:"What's on your mind?",lfStyling:"textarea",lfUiState:i()?"disabled":"primary",part:l.prompt,ref:c(f,"textarea")})}}),te=e=>({back:()=>{const{controller:t,elements:r,handlers:a}=e(),{blocks:i,cyAttributes:s,manager:n,parts:l}=t.get,{settings:f}=r.refs,{button:c}=a.settings,{assignRef:d,theme:p}=n,{bemClass:m,get:g}=p,v=g.current().variables["--lf-icon-previous"];return o("lf-button",{class:m(i.settings._,i.settings.back),"data-cy":s.button,id:y.options.back,lfIcon:v,lfLabel:"Back",lfStretchX:!0,"onLf-button-event":c,part:l.back,ref:d(f,"back")})},endpoint:()=>{const{controller:t,elements:r,handlers:a}=e(),{blocks:i,compInstance:s,cyAttributes:n,manager:l,parts:f}=t.get,{settings:c}=r.refs,{textfield:d}=a.settings,{assignRef:p,theme:m}=l,{bemClass:g,get:v}=m;return o("lf-textfield",{class:g(i.settings._,i.settings.textfield),"data-cy":n.input,id:y.options.endpointUrl,lfIcon:v.icon("network"),lfLabel:"Endpoint URL",lfValue:s.lfEndpointUrl,"onLf-textfield-event":d,part:f.endpointUrl,ref:p(c,"endpoint")})},maxTokens:()=>{const{controller:t,elements:r,handlers:a}=e(),{blocks:i,compInstance:s,cyAttributes:n,manager:l,parts:f}=t.get,{settings:c}=r.refs,{textfield:d}=a.settings,{assignRef:p,data:m,theme:g}=l,{stringify:v}=m.cell,{bemClass:_,get:S}=g;return o("lf-textfield",{class:_(i.settings._,i.settings.textfield),"data-cy":n.input,id:y.options.maxTokens,lfHtmlAttributes:{min:10,type:"number"},lfIcon:S.icon("numbers"),lfLabel:"Max tokens count",lfValue:v(s.lfMaxTokens),"onLf-textfield-event":d,part:f.maxTokens,ref:p(c,"maxTokens")})},polling:()=>{const{controller:t,elements:r,handlers:a}=e(),{blocks:i,compInstance:s,cyAttributes:n,manager:l,parts:f}=t.get,{settings:c}=r.refs,{textfield:d}=a.settings,{assignRef:p,data:m,theme:g}=l,{stringify:v}=m.cell,{bemClass:_,get:S}=g;return o("lf-textfield",{class:_(i.settings._,i.settings.textfield),"data-cy":n.input,id:y.options.polling,lfHtmlAttributes:{min:10,type:"number"},lfIcon:S.icon("hourglassLow"),lfLabel:"Polling interval",lfValue:v(s.lfPollingInterval),"onLf-textfield-event":d,part:f.polling,ref:p(c,"polling")})},system:()=>{const{controller:t,elements:r,handlers:a}=e(),{blocks:i,compInstance:s,cyAttributes:n,manager:l,parts:f}=t.get,{settings:c}=r.refs,{textfield:d}=a.settings,{assignRef:p,theme:m}=l,{bemClass:g}=m;return o("lf-textfield",{class:g(i.settings._,i.settings.textarea),"data-cy":n.input,id:y.options.system,lfLabel:"System prompt",lfStyling:"textarea",lfValue:s.lfSystem,"onLf-textfield-event":d,part:f.system,ref:p(c,"system"),title:"The system prompt is used to generate the first response in the conversation."})},temperature:()=>{const{controller:t,elements:r,handlers:a}=e(),{blocks:i,compInstance:s,cyAttributes:n,manager:l,parts:f}=t.get,{settings:c}=r.refs,{textfield:d}=a.settings,{assignRef:p,data:m,theme:g}=l,{stringify:v}=m.cell,{bemClass:_,get:S}=g;return o("lf-textfield",{class:_(i.settings._,i.settings.textfield),"data-cy":n.input,id:y.options.temperature,lfHtmlAttributes:{max:1,min:.1,type:"number"},lfIcon:S.icon("temperature"),lfLabel:"Temperature",lfValue:v(s.lfTemperature),"onLf-textfield-event":d,part:f.temperature,ref:p(c,"temperature")})}}),ee=e=>({copyContent:t=>{const{controller:r,elements:a,handlers:i}=e(),{blocks:s,currentPrompt:n,manager:l,parts:f}=r.get,{toolbar:c}=a.refs,{button:d}=i.toolbar,{assignRef:p,theme:m}=l,{bemClass:g,get:v}=m,_=!!n();return o("lf-button",{class:g(s.toolbar._,s.toolbar.button),id:y.toolbar.copyContent,lfIcon:v.current().variables["--lf-icon-copy"],lfStyling:"flat",lfUiState:_?"disabled":"primary","onLf-button-event":S=>d(S,t),part:f.copyContent,ref:p(c,"copyContent"),title:"Copy text to clipboard."})},deleteMessage:t=>{const{controller:r,elements:a,handlers:i}=e(),{blocks:s,currentPrompt:n,manager:l,parts:f}=r.get,{toolbar:c}=a.refs,{button:d}=i.toolbar,{assignRef:p,theme:m}=l,{bemClass:g,get:v}=m,_=!!n();return o("lf-button",{class:g(s.toolbar._,s.toolbar.button),id:y.toolbar.deleteMessage,lfIcon:v.current().variables["--lf-icon-delete"],lfStyling:"flat",lfUiState:_?"disabled":"danger","onLf-button-event":S=>d(S,t),part:f.deleteMessage,ref:p(c,"deleteMessage"),title:"Delete this message from the chat history."})},regenerate:t=>{const{controller:r,elements:a,handlers:i}=e(),{blocks:s,currentPrompt:n,manager:l,parts:f}=r.get,{toolbar:c}=a.refs,{button:d}=i.toolbar,{assignRef:p,theme:m}=l,{bemClass:g,get:v}=m,_=!!n();return o("lf-button",{class:g(s.toolbar._,s.toolbar.button),id:y.toolbar.regenerate,lfIcon:v.current().variables["--lf-icon-refresh"],lfStyling:"flat",lfUiState:_?"disabled":"primary","onLf-button-event":S=>d(S,t),part:f.regenerate,ref:p(c,"regenerate"),title:"Regenerate the response to this request."})}}),re=e=>({button:async t=>{const{eventType:r,id:a}=t.detail,i=e(),{controller:s,elements:n}=i,{get:l,set:f}=s,{refs:c}=n,{stt:d,textarea:p}=c.chat,{llm:m}=l.manager;if(r==="click")switch(a){case y.chat.clear:Ut(i);break;case y.chat.send:Vt(i);break;case y.chat.configuration:case y.chat.settings:f.view("settings");break;case y.chat.stt:m.speechToText(p,d)}}}),ae=e=>({button:async t=>{const{eventType:r,id:a}=t.detail,{get:i,set:s}=e().controller,{compInstance:n}=i;r==="click"&&a===y.options.back&&(n.onLfEvent(t,"config"),s.view("main"))},textfield:t=>{const{eventType:r,id:a,value:i}=t.detail,{get:s}=e().controller,{compInstance:n}=s;if(r==="change")switch(a){case y.options.contextWindow:n.lfContextWindow=parseInt(i);break;case y.options.endpointUrl:n.lfEndpointUrl=i;break;case y.options.maxTokens:n.lfMaxTokens=parseInt(i);break;case y.options.polling:n.lfPollingInterval=parseInt(i);break;case y.options.system:n.lfSystem=i;break;case y.options.temperature:n.lfTemperature=parseFloat(i)}}}),ie=e=>({button:async(t,r)=>{const{eventType:a,id:i}=t.detail;if(a==="click")switch(i){case y.toolbar.copyContent:navigator.clipboard.writeText(r.content);break;case y.toolbar.deleteMessage:((s,n)=>{const{get:l,set:f}=s.controller,c=l.history(),d=c.indexOf(n);d!==-1&&f.history(()=>c.splice(d,1))})(e(),r);break;case y.toolbar.regenerate:(async(s,n)=>{const{get:l,set:f}=s.controller,c=l.history(),d=l.compInstance,p=c.indexOf(n);p!==-1&&await f.history(()=>{d.history=c.slice(0,p+1)}),await Dt(s),jt(s)})(e(),r)}}}),se=(e,t)=>({...e,newPrompt:async()=>{const{textarea:r}=t().elements.refs.chat;await r.setBlur();const a=await r.getValue();return a?{role:"user",content:a}:null}}),ne=e=>({chat:Qt(e),settings:te(e),toolbar:ee(e)}),oe=e=>({chat:re(e),settings:ae(e),toolbar:ie(e)});var A,w,L,X,Z,M,G,Q,P,C,tt,F,et,rt,at,it,st,nt,u=function(e,t,r,a){if(r==="a"&&!a)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!a:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?a:r==="a"?a.call(e):a?a.value:t.get(e)},N=function(e,t,r,a,i){if(typeof t=="function"?e!==t||!0:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return t.set(e,r),r};const le=class{constructor(e){gt(this,e),this.lfEvent=vt(this,"lf-chat-event"),A.add(this),this.history=[],this.currentTokens=0,this.status="connecting",this.view="main",this.lfContextWindow=8192,this.lfEmpty="Your chat history is empty!",this.lfEndpointUrl="http://localhost:5001",this.lfLayout="top",this.lfMaxTokens=250,this.lfPollingInterval=1e4,this.lfSeed=-1,this.lfStyle="",this.lfSystem="You are a helpful and cheerful assistant eager to help the user out with his tasks.",this.lfTemperature=.7,this.lfTypewriterProps={lfDeleteSpeed:10,lfTag:"p",lfSpeed:20},this.lfUiSize="medium",this.lfValue=[],w.set(this,void 0),L.set(this,Ft),X.set(this,_t),Z.set(this,xt),M.set(this,Ot),G.set(this,zt),Q.set(this,St),P.set(this,void 0),C.set(this,void 0),tt.set(this,()=>{var t,r,a;N(this,C,(t={blocks:u(this,L,"f"),compInstance:this,currentPrompt:()=>this.currentPrompt,currentTokens:()=>this.currentTokens,cyAttributes:u(this,X,"f"),history:()=>this.history,lastMessage:(i="user")=>this.history.slice().reverse().find(s=>s.role===i),lfAttributes:u(this,Z,"f"),manager:u(this,w,"f"),parts:u(this,M,"f"),status:()=>this.status,view:()=>this.view},r={currentPrompt:i=>this.currentPrompt=i,currentTokens:i=>this.currentTokens=i,history:async i=>{i(),this.currentTokens=await Lt(u(this,C,"f")),this.onLfEvent(new CustomEvent("update"),"update")},status:i=>this.status=i,view:i=>this.view=i},{controller:{get:se(t,a=()=>u(this,C,"f")),set:r},elements:{jsx:ne(a),refs:{chat:{clear:null,configuration:null,progressbar:null,send:null,settings:null,spinner:null,stt:null,textarea:null},settings:{back:null,endpoint:null,maxTokens:null,polling:null,system:null,temperature:null},toolbar:{deleteMessage:null,copyContent:null,regenerate:null}}},handlers:oe(a)}))}),et.set(this,()=>{const{bemClass:t}=u(this,w,"f").theme,{chat:r,commands:a,input:i,messages:s,request:n}=u(this,L,"f"),{clear:l,progressbar:f,send:c,settings:d,spinner:p,stt:m,textarea:g}=u(this,C,"f").elements.jsx.chat,{history:v,lfEmpty:_}=this;return o(B,null,o("div",{class:t(n._)},o("div",{class:t(i._)},d(),g(),f()),o("div",{class:t(a._)},l(),m(),c())),o("div",{class:t(s._)},v!=null&&v.length?v.map(S=>o("div",{class:t(s._,s.container,{[S.role]:!0})},o("div",{class:t(s._,s.content,{[S.role]:!0})},u(this,at,"f").call(this,S)),u(this,nt,"f").call(this,S))):o("div",{class:t(s._,s.empty)},_)),o("div",{class:t(r._,r.spinnerBar)},p()))}),rt.set(this,()=>{const{bemClass:t}=u(this,w,"f").theme,{chat:r}=u(this,L,"f");return o(B,null,o("div",{class:t(r._,r.spinner)},o("lf-spinner",{lfActive:!0,lfDimensions:"7px",lfLayout:6})),o("div",{class:t(r._,r.title)},"Just a moment."),o("div",{class:t(r._,r.text)},"Contacting the LLM endpoint..."))}),at.set(this,t=>{const{theme:r}=u(this,w,"f"),{bemClass:a}=r,{messages:i}=u(this,L,"f"),{messageBlock:s}=u(this,C,"f").elements.jsx.chat,{role:n}=t,l=[],f=t.content,c=/```(\w+)?\n([\s\S]*?)```/g;let d,p=0;for(;(d=c.exec(f))!==null;){if(d.index>p){const v=f.slice(p,d.index);l.push(s(v,n))}const m=d[1]?d[1].trim():"text",g=d[2].trim();l.push(o("lf-code",{class:a(i._,i.code),lfLanguage:m,lfValue:g})),p=d.index+d[0].length}if(p<f.length){const m=f.slice(p);l.push(s(m,n))}return l}),it.set(this,()=>{const{bemClass:t,get:r}=u(this,w,"f").theme,{chat:a}=u(this,L,"f"),{configuration:i}=u(this,C,"f").elements.jsx.chat,s=r.icon("door"),{style:n}=u(this,w,"f").assets.get(`./assets/svg/${s}.svg`);return o(B,null,o("div",{class:t(a._,a.error)},o("div",{class:t(a._,a.icon),style:n}),o("div",{class:t(a._,a.title)},"Zzz..."),o("div",{class:t(a._,a.text)},"The LLM endpoint is currently offline.")),i())}),st.set(this,()=>{const{bemClass:t}=u(this,w,"f").theme,{settings:r}=u(this,L,"f"),{back:a,endpoint:i,maxTokens:s,polling:n,system:l,temperature:f}=u(this,C,"f").elements.jsx.settings;return o(B,null,a(),o("div",{class:t(r._,r.configuration),part:u(this,M,"f").settings},l(),i(),f(),s(),n()))}),nt.set(this,t=>{const{bemClass:r}=u(this,w,"f").theme,{toolbar:a}=u(this,L,"f"),{copyContent:i,deleteMessage:s,regenerate:n}=u(this,C,"f").elements.jsx.toolbar;return o("div",{class:r(a._),part:u(this,M,"f").toolbar},s(t),i(t),t.role==="user"&&n(t))})}onLfEvent(e,t){this.lfEvent.emit({comp:this,eventType:t,id:this.rootElement.id,originalEvent:e,history:JSON.stringify(this.history)||"",status:this.status})}listenKeydown(e){e.key==="Enter"?e.ctrlKey&&(e.preventDefault(),e.stopPropagation(),Vt(u(this,C,"f"))):e.stopPropagation()}updatePollingInterval(){clearInterval(u(this,P,"f")),N(this,P,setInterval(u(this,A,"m",F),this.lfPollingInterval))}async updateTokensCount(){this.currentTokens=await Lt(u(this,C,"f"))}async getDebugInfo(){return this.debugInfo}async getHistory(){try{return JSON.stringify(this.history)}catch{return""}}async getLastMessage(){var e,t,r;return((r=(t=(e=this.history)==null?void 0:e.slice(-1))==null?void 0:t[0])==null?void 0:r.content)??""}async getProps(){const e=Ht.map(t=>[t,this[t]]);return Object.fromEntries(e)}async refresh(){yt(this)}async setHistory(e){const{set:t}=u(this,C,"f").controller;try{t.history(()=>this.history=JSON.parse(e))}catch{}}async unmount(e=0){setTimeout(()=>{this.onLfEvent(new CustomEvent("unmount"),"unmount"),this.rootElement.remove()},e)}connectedCallback(){u(this,w,"f")&&u(this,w,"f").theme.register(this)}async componentWillLoad(){N(this,w,await Ct(this)),u(this,tt,"f").call(this);const{debug:e}=u(this,w,"f"),{set:t}=u(this,C,"f").controller;if(this.lfValue)try{const r=typeof this.lfValue=="string"?JSON.parse(this.lfValue):this.lfValue;t.history(()=>this.history=r)}catch{e.logs.new(this,"Couldn't set value for chat history","warning")}}componentDidLoad(){const{info:e}=u(this,w,"f").debug;N(this,P,setInterval(async()=>u(this,A,"m",F).call(this),this.lfPollingInterval)),this.onLfEvent(new CustomEvent("ready"),"ready"),u(this,A,"m",F).call(this),e.update(this,"did-load")}componentWillRender(){const{info:e}=u(this,w,"f").debug;e.update(this,"will-render")}componentDidRender(){const{info:e}=u(this,w,"f").debug;e.update(this,"did-render")}render(){const{bemClass:e,setLfStyle:t}=u(this,w,"f").theme,{chat:r}=u(this,L,"f"),{lfLayout:a,lfStyle:i,status:s,view:n}=this;return o(kt,{key:"f59c558fff0aff65b61cd2dce7689095c2b110e9"},i&&o("style",{key:"8442d1e19b31cd49be4ae5e5c920a4b78c83f402",id:u(this,G,"f")},t(this)),o("div",{key:"28c5e41265f7ec572a6b24713c03030bf5e02317",id:u(this,Q,"f")},o("div",{key:"7c3a1f91086ababa28dc846e8838b6fe19089f59",class:e(r._,null,{[n]:!0,[a]:!0,[s]:!0}),part:u(this,M,"f").chat},this.view==="settings"?u(this,st,"f").call(this):this.status==="ready"?u(this,et,"f").call(this):this.status==="connecting"?u(this,rt,"f").call(this):u(this,it,"f").call(this))))}disconnectedCallback(){var e;clearInterval(u(this,P,"f")),(e=u(this,w,"f"))==null||e.theme.unregister(this)}get rootElement(){return wt(this)}static get watchers(){return{lfPollingInterval:["updatePollingInterval"],lfSystem:["updateTokensCount"]}}};w=new WeakMap,L=new WeakMap,X=new WeakMap,Z=new WeakMap,M=new WeakMap,G=new WeakMap,Q=new WeakMap,P=new WeakMap,C=new WeakMap,tt=new WeakMap,et=new WeakMap,rt=new WeakMap,at=new WeakMap,it=new WeakMap,st=new WeakMap,nt=new WeakMap,A=new WeakSet,F=async function(){const{llm:e}=u(this,w,"f");this.status==="offline"&&(this.status="connecting");try{const t=await e.poll(this.lfEndpointUrl);this.status=t.ok?"ready":"offline"}catch{this.status="offline"}this.onLfEvent(new CustomEvent("polling"),"polling")},le.style=`::-webkit-scrollbar{width:9px}::-webkit-scrollbar-thumb{transition:all 400ms cubic-bezier(0.8, -0.5, 0.2, 1.4);background-color:rgb(var(--lf-color-primary))}::-webkit-scrollbar-track{background-color:rgb(var(--lf-color-bg))}:host{display:block;font-family:var(--lf-chat-font-family, var(--lf-font-family-primary));font-size:var(--lf-chat-font-size, var(--lf-font-size))}:host([lf-ui-size=large]){font-size:calc(
        var(--lf-chat-font-size, var(--lf-font-size)) * var(--lf-ui-size-large)
      )}:host([lf-ui-size=medium]){font-size:calc(
        var(--lf-chat-font-size, var(--lf-font-size)) * var(--lf-ui-size-medium)
      )}:host([lf-ui-size=small]){font-size:calc(
        var(--lf-chat-font-size, var(--lf-font-size)) * var(--lf-ui-size-small)
      )}:host([lf-ui-size=xlarge]){font-size:calc(
        var(--lf-chat-font-size, var(--lf-font-size)) * var(--lf-ui-size-xlarge)
      )}:host([lf-ui-size=xsmall]){font-size:calc(
        var(--lf-chat-font-size, var(--lf-font-size)) * var(--lf-ui-size-xsmall)
      )}:host([lf-ui-size=xxlarge]){font-size:calc(
        var(--lf-chat-font-size, var(--lf-font-size)) * var(--lf-ui-size-xxlarge)
      )}:host([lf-ui-size=xxsmall]){font-size:calc(
        var(--lf-chat-font-size, var(--lf-font-size)) * var(--lf-ui-size-xxsmall)
      )}#lf-component{width:100%;height:100%}:host{width:100%;height:100%}#lf-component{position:relative}.chat{background-color:rgba(var(--lf-chat-color-bg, var(--lf-color-bg)), 0.075);color:rgb(var(--lf-chat-color-on-bg, var(--lf-color-on-bg)));backdrop-filter:blur(8px);-webkit-backdrop-filter:blur(8px);box-sizing:border-box;display:grid;height:100%;margin:auto;padding:var(--lf-chat-padding, 1em)}.chat--bottom{align-content:center;grid-gap:var(--lf-chat-outer-grid-gap, 0.75em);grid-template-areas:"messages" "spinner" "request";grid-template-rows:1fr auto auto}.chat--top{grid-gap:var(--lf-chat-outer-grid-gap, 0.75em);grid-template-areas:"request" "messages" "spinner";grid-template-rows:auto 1fr auto}.chat--connecting,.chat--offline{grid-template-areas:none;grid-template-rows:repeat(3, auto)}.chat__configuration{justify-self:center}.chat__error{display:grid;grid-template-rows:repeat(3, auto);padding:2em}.chat__icon{background-color:rgba(var(--lf-chat-color-on-bg, var(--lf-color-on-bg)), 0.75);height:4em;width:4em;overflow:hidden;justify-self:center;margin-bottom:0.75em}.chat__spinner{min-height:3em}.chat__spinner-bar{bottom:0;grid-area:spinner;height:0.25em;left:0;position:absolute;width:100%}.chat__text{font-size:0.875em;font-weight:500;line-height:1.375em;letter-spacing:0.01em;font-style:italic;opacity:0.6;text-align:center}.chat__title{font-size:1.25em;font-weight:500;line-height:1.4em;letter-spacing:0em;text-align:center}.request{box-sizing:border-box;grid-area:request;max-width:100%;padding:var(--lf-chat-inner-padding, 0 1em);width:100%}.commands{align-items:center;display:flex;justify-content:space-evenly;padding:var(--lf-chat-buttons-padding, 1em 0)}.commands__stt{padding:0 1em}.input{display:grid;grid-template-areas:"textarea button" "progressbar button";grid-template-columns:1fr auto}.input__button{grid-area:button}.input__progressbar{grid-area:progressbar}.input__textarea{grid-area:textarea;overflow-x:hidden}.settings{display:grid;grid-gap:0.5em;grid-template-rows:auto 1fr;height:100%}.settings__configuration{overflow:auto}.settings__textfield{box-sizing:border-box;padding-top:0.75em}.settings__textarea{box-sizing:border-box;overflow:hidden;padding-top:0.75em 0}.toolbar{background-color:rgba(var(--lf-chat-color-surface, var(--lf-color-surface)), 0.875);color:rgb(var(--lf-chat-color-on-surface, var(--lf-color-on-surface)));backdrop-filter:blur(8px);-webkit-backdrop-filter:blur(8px);border-bottom-left-radius:var(--lf-chat-border-radius, var(--lf-ui-border-radius));border-bottom-right-radius:var(--lf-chat-border-radius, var(--lf-ui-border-radius));box-sizing:border-box;display:flex;justify-content:flex-end;padding:0.5em;width:100%}.toolbar__button{margin:0 2px}.messages{align-content:start;box-sizing:border-box;display:grid;grid-area:messages;grid-gap:var(--lf-chat-grid-gap, 0.75em);grid-template-columns:1fr;margin-bottom:var(--lf-chat-margin-bottom, 1em);margin-top:var(--lf-chat-margin-top, 1em);overflow:auto;padding:var(--lf-chat-inner-padding, 0 1em);white-space:pre-line;width:100%;word-break:normal}.messages__container{border:0;border-style:solid;border-color:rgba(var(--lf-chat-border-color, var(--lf-color-border)), 1);border-width:1px;border-radius:var(--lf-chat-border-radius, var(--lf-ui-border-radius));background-color:rgba(var(--lf-chat-color-bg, var(--lf-color-bg)), 0.075);color:rgb(var(--lf-chat-color-on-bg, var(--lf-color-on-bg)));backdrop-filter:blur(8px);-webkit-backdrop-filter:blur(8px);transition:background-color 200ms cubic-bezier(0.4, 0, 0.6, 1);height:max-content;max-width:80%;position:relative}.messages__container:hover{background-color:rgba(var(--lf-chat-color-bg, var(--lf-color-bg)), 0.125);color:rgb(var(--lf-chat-color-on-bg, var(--lf-color-on-bg)));backdrop-filter:blur(8px);-webkit-backdrop-filter:blur(8px)}.messages__container--assistant{--lf-typewriter-color-bg:none;--lf-typewriter-padding:0;justify-self:start}.messages__container--user{justify-self:end}.messages__empty{font-style:italic;opacity:0.5;text-align:center}.messages__content{font-size:1em;font-weight:400;line-height:1.6em;letter-spacing:0em;margin-bottom:1em;margin:0;max-width:100%;padding:0.75em}.messages__code{height:auto}`;var k,z,E,I,D,V,ot,lt,q,R,O,Tt,Bt,ct,Et,ft,ht,Y,It,Mt,Pt,Nt,Wt,Rt,J,h=function(e,t,r,a){if(r==="a"&&!a)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!a:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?a:r==="a"?a.call(e):a?a.value:t.get(e)},dt=function(e,t,r,a,i){if(typeof t=="function"?e!==t||!0:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return t.set(e,r),r};const ce=class{constructor(e){gt(this,e),this.lfEvent=vt(this,"lf-chip-event"),k.add(this),this.expandedNodes=new Set,this.hiddenNodes=new Set,this.selectedNodes=new Set,this.lfDataset=null,this.lfRipple=!0,this.lfStyle="",this.lfStyling="standard",this.lfUiSize="medium",this.lfUiState="primary",this.lfValue=null,z.set(this,void 0),E.set(this,$t),I.set(this,_t),D.set(this,xt),V.set(this,qt),ot.set(this,zt),lt.set(this,St),q.set(this,{}),R.set(this,[])}onLfEvent(e,t,r){var d;const{effects:a}=h(this,z,"f"),{expandedNodes:i,lfDataset:s,lfRipple:n,selectedNodes:l}=this,{expansion:f,node:c}=r||{};switch(t){case"click":f&&h(this,k,"m",O).call(this,c)?(i.has(c)?i.delete(c):i.add(c),this.expandedNodes=new Set(i)):c&&(l.has(c)?l.delete(c):l.add(c),this.selectedNodes=new Set(l));break;case"delete":const p=(d=s==null?void 0:s.nodes)==null?void 0:d.indexOf(c);p>-1&&s.nodes.splice(p,1);break;case"pointerdown":n&&h(this,k,"m",ct).call(this)&&a.ripple(e,h(this,q,"f")[c.id])}this.lfEvent.emit({comp:this,eventType:t,id:this.rootElement.id,originalEvent:e,node:c,selectedNodes:this.selectedNodes})}async getDebugInfo(){return this.debugInfo}async getProps(){const e=Yt.map(t=>[t,this[t]]);return Object.fromEntries(e)}async getSelectedNodes(){return this.selectedNodes}async refresh(){yt(this)}async setSelectedNodes(e){var a,i;const t=new Set,r=Array.isArray(e)&&e.every(s=>typeof s=="string");(i=(a=this.lfDataset)==null?void 0:a.nodes)==null||i.forEach(s=>{r?typeof s.id=="string"&&e.includes(s.id)&&t.add(s):e.includes(s)&&t.add(s)}),this.selectedNodes=t}async unmount(e=0){setTimeout(()=>{this.onLfEvent(new CustomEvent("unmount"),"unmount"),this.rootElement.remove()},e)}connectedCallback(){h(this,z,"f")&&h(this,z,"f").theme.register(this)}async componentWillLoad(){var e;dt(this,z,await Ct(this)),(e=this.lfValue)!=null&&e.length&&this.setSelectedNodes(this.lfValue)}componentDidLoad(){const{debug:e}=h(this,z,"f");this.onLfEvent(new CustomEvent("ready"),"ready"),e.info.update(this,"did-load")}componentWillRender(){const{info:e}=h(this,z,"f").debug;e.update(this,"will-render")}componentDidRender(){const{debug:e}=h(this,z,"f");e.info.update(this,"did-render")}render(){const{bemClass:e,setLfStyle:t}=h(this,z,"f").theme,{lfStyle:r}=this;return dt(this,R,[]),o(kt,{key:"d2e4939c05809b287a97f58d1f1576e3a561265f"},r&&o("style",{key:"eb2dd5624753f4fa072b23cac79f37a6db714591",id:h(this,ot,"f")},t(this)),o("div",{key:"4df8cbc97f522bb53637a3b55552644d9f429188",id:h(this,lt,"f")},o("div",{key:"5691b3c2113be206e4d569d90da9d0bb105292eb",class:e(h(this,E,"f").chip._,null,{choice:h(this,k,"m",Bt).call(this),filter:h(this,k,"m",ft).call(this),input:h(this,k,"m",ht).call(this)}),part:h(this,V,"f").chip,role:"grid"},h(this,k,"m",Nt).call(this))))}disconnectedCallback(){var e;(e=h(this,z,"f"))==null||e.theme.unregister(this)}get rootElement(){return wt(this)}};z=new WeakMap,E=new WeakMap,I=new WeakMap,D=new WeakMap,V=new WeakMap,ot=new WeakMap,lt=new WeakMap,q=new WeakMap,R=new WeakMap,k=new WeakSet,O=function(e){return!(!e.children||!e.children.length)},Tt=function(e){return!(!e.icon||e.value)},Bt=function(){return this.lfStyling==="choice"},ct=function(){return this.lfStyling==="choice"||this.lfStyling==="filter"},Et=function(e){return this.expandedNodes.has(e)},ft=function(){return this.lfStyling==="filter"},ht=function(){return this.lfStyling==="input"},Y=function(e){return this.selectedNodes.has(e)},It=function(e){const{bemClass:t}=h(this,z,"f").theme,{item:r}=h(this,E,"f");return o("div",{class:t(r._,r.icon,{"has-actions":!0,trailing:!0}),"data-cy":h(this,I,"f").button,"data-lf":h(this,D,"f").icon,key:e.id+"_delete",onClick:a=>{this.onLfEvent(a,"delete",{node:e})}})},Mt=function(e){const{get:t}=h(this,z,"f").assets,{bemClass:r}=h(this,z,"f").theme,{item:a}=h(this,E,"f"),i=[];if(e.icon){const{style:s}=t(`./assets/svg/${e.icon}.svg`);i.push(o("div",{class:r(a._,a.icon,{leading:!0,hidden:this.lfStyling==="filter"&&h(this,k,"m",Y).call(this,e)}),"data-cy":h(this,I,"f").maskedSvg,style:s}))}return h(this,k,"m",ft).call(this)&&i.push(o("span",{class:r(a._,a.checkmark)},o("svg",{class:r(a._,a.checkmarkSvg),viewBox:"-2 -3 30 30"},o("path",{class:r(a._,a.checkmarkPath),d:"M1.73,12.91 8.1,19.28 22.79,4.59",fill:"none",stroke:"currentColor"})))),i},Pt=function(e,t){const{bemClass:r}=h(this,z,"f").theme,{item:a}=h(this,E,"f");return o("div",{class:r(a._,null,{"no-label":h(this,k,"m",Tt).call(this,e),selected:h(this,k,"m",Y).call(this,e)}),"data-cy":h(this,I,"f").node,"data-lf":h(this,D,"f")[this.lfUiState],"data-value":e.id,onClick:i=>{this.onLfEvent(i,"click",{node:e})},part:h(this,V,"f").item,role:"row",title:e.description??""},h(this,k,"m",Rt).call(this,e),o("span",{class:r(a._,a.indent)}),h(this,k,"m",Mt).call(this,e),o("span",{class:r(a._,a.primaryAction),"data-cy":h(this,I,"f").input,onBlur:i=>{this.onLfEvent(i,"blur",{node:e})},onFocus:i=>{this.onLfEvent(i,"focus",{node:e})},role:"button",tabindex:t},o("span",{class:r(a._,a.text)},e.value)),h(this,k,"m",ht).call(this)&&h(this,k,"m",It).call(this,e))},Nt=function(){var i,s;const{bemClass:e}=h(this,z,"f").theme,{chip:t}=h(this,E,"f"),r=[],a=(s=(i=this.lfDataset)==null?void 0:i.nodes)==null?void 0:s.length;for(let n=0;a&&n<a;n++){dt(this,R,[]);const l=this.lfDataset.nodes[n];h(this,k,"m",Wt).call(this,l,0),r.push(o("div",{class:e(t._,t.node)},h(this,R,"f")))}return r},Wt=function e(t,r){const{bemClass:a}=h(this,z,"f").theme,{wrapper:i}=h(this,E,"f"),s=h(this,k,"m",O).call(this,t),n=h(this,k,"m",Et).call(this,t),l={[Zt.indentOffset]:r.toString()},f=a(i._,i.node,{expanded:n,hidden:!!(!s&&r)});if(h(this,R,"f").push(o("div",{class:a(i._,null,{hidden:h(this,k,"m",O).call(this,t)&&!h(this,k,"m",J).call(this,t)})},o("div",{class:a(i._,i.indent),part:h(this,V,"f").indent,style:l}),s?o("div",{class:f,onClick:c=>{this.onLfEvent(c,"click",{expansion:!0,node:t})}}):r?o("div",{class:f}):null,h(this,k,"m",Pt).call(this,t,r))),h(this,k,"m",J).call(this,t))for(let c=0;c<t.children.length;c++)t.children[c]&&h(this,k,"m",e).call(this,t.children[c],r+1)},Rt=function(e){if(this.lfRipple&&h(this,k,"m",ct).call(this))return o("div",{"data-cy":h(this,I,"f").rippleSurface,"data-lf":h(this,D,"f").rippleSurface,onPointerDown:t=>this.onLfEvent(t,"pointerdown",{node:e}),ref:t=>{t&&this.lfRipple&&(h(this,q,"f")[e.id]=t)}})},J=function(e){return this.expandedNodes.has(e)},ce.style=`::-webkit-scrollbar{width:9px}::-webkit-scrollbar-thumb{transition:all 400ms cubic-bezier(0.8, -0.5, 0.2, 1.4);background-color:rgb(var(--lf-color-primary))}::-webkit-scrollbar-track{background-color:rgb(var(--lf-color-bg))}[data-lf=ripple]{animation-duration:var(--lf-ui-duration-ripple, 675ms);animation-fill-mode:forwards;animation-name:lf-ripple;animation-timing-function:var(--lf-ui-timing-ripple, ease-out);background:var(--lf-ui-ripple-background, var(--lf-color-primary));border-radius:var(--lf-ui-radius-ripple, 50%);height:var(--lf-ui-ripple-height, 100%);left:var(--lf-ui-ripple-x, 50%);opacity:var(--lf-ui-opacity-ripple, 0.5);pointer-events:none;position:absolute;top:var(--lf-ui-ripple-y, 50%);transform:scale(0);width:var(--lf-ui-ripple-width, 100%)}@keyframes lf-ripple{from{transform:scale(0)}to{opacity:0;transform:scale(4)}}[data-lf=ripple-surface]{cursor:pointer;height:100%;left:0;overflow:hidden;position:absolute;top:0;width:100%}[data-lf=danger]{--lf-chip-color-primary:var(
    --lf-chip-color-danger,
    var(--lf-color-danger)
  );--lf-chip-color-on-primary:var(
    --lf-chip-color-danger,
    var(--lf-color-on-danger)
  )}[data-lf=disabled]{opacity:var(--lf-chip-ui-opacity-disabled, var(--lf-ui-opacity-disabled));pointer-events:none}[data-lf=info]{--lf-chip-color-primary:var(
    --lf-chip-color-info,
    var(--lf-color-info)
  );--lf-chip-color-on-primary:var(
    --lf-chip-color-info,
    var(--lf-color-on-info)
  )}[data-lf=secondary]{--lf-chip-color-primary:var(
    --lf-chip-color-secondary,
    var(--lf-color-secondary)
  );--lf-chip-color-on-primary:var(
    --lf-chip-color-secondary,
    var(--lf-color-on-secondary)
  )}[data-lf=success]{--lf-chip-color-primary:var(
    --lf-chip-color-success,
    var(--lf-color-success)
  );--lf-chip-color-on-primary:var(
    --lf-chip-color-success,
    var(--lf-color-on-success)
  )}[data-lf=warning]{--lf-chip-color-primary:var(
    --lf-chip-color-warning,
    var(--lf-color-warning)
  );--lf-chip-color-on-primary:var(
    --lf-chip-color-warning,
    var(--lf-color-on-warning)
  )}:host{display:block;font-family:var(--lf-chip-font-family, var(--lf-font-family-primary));font-size:var(--lf-chip-font-size, var(--lf-font-size))}:host([lf-ui-size=large]){font-size:calc(
        var(--lf-chip-font-size, var(--lf-font-size)) * var(--lf-ui-size-large)
      )}:host([lf-ui-size=medium]){font-size:calc(
        var(--lf-chip-font-size, var(--lf-font-size)) * var(--lf-ui-size-medium)
      )}:host([lf-ui-size=small]){font-size:calc(
        var(--lf-chip-font-size, var(--lf-font-size)) * var(--lf-ui-size-small)
      )}:host([lf-ui-size=xlarge]){font-size:calc(
        var(--lf-chip-font-size, var(--lf-font-size)) * var(--lf-ui-size-xlarge)
      )}:host([lf-ui-size=xsmall]){font-size:calc(
        var(--lf-chip-font-size, var(--lf-font-size)) * var(--lf-ui-size-xsmall)
      )}:host([lf-ui-size=xxlarge]){font-size:calc(
        var(--lf-chip-font-size, var(--lf-font-size)) * var(--lf-ui-size-xxlarge)
      )}:host([lf-ui-size=xxsmall]){font-size:calc(
        var(--lf-chip-font-size, var(--lf-font-size)) * var(--lf-ui-size-xxsmall)
      )}#lf-component{width:100%;height:100%}:host{width:100%;height:100%;outline:none}.chip{width:100%;height:100%;align-content:center;box-sizing:border-box;display:flex;flex-wrap:wrap;justify-content:center;padding:0.25em}.chip--choice .item{cursor:pointer}.chip--choice .item:hover{background-color:rgba(var(--lf-chip-color-primary, var(--lf-color-primary)), 0.125);backdrop-filter:blur(8px);-webkit-backdrop-filter:blur(8px)}.chip--choice .item--selected{background-color:rgba(var(--lf-chip-color-primary, var(--lf-color-primary)), 0.875);color:rgb(var(--lf-chip-color-on-primary, var(--lf-color-on-primary)));backdrop-filter:blur(8px);-webkit-backdrop-filter:blur(8px)}.chip--choice .item--selected:hover{background-color:rgba(var(--lf-chip-color-primary, var(--lf-color-primary)), 0.75);backdrop-filter:blur(8px);-webkit-backdrop-filter:blur(8px)}.chip--choice .item--selected .item__icon--leading:not(.item__icon--hidden){background-color:rgba(var(--lf-chip-color-on-primary, var(--lf-color-on-primary)), 1)}.chip--filter .item{cursor:pointer}.chip--filter .item__icon--leading{transition:opacity 200ms cubic-bezier(0.4, 0, 0.6, 1);opacity:1}.chip--filter .item__icon--leading+.item__checkmark{transition:opacity 400ms cubic-bezier(0.8, -0.5, 0.2, 1.4);opacity:0}.chip--filter .item__icon--leading+.item__checkmark .item__checkmark-svg{transition:width 150ms cubic-bezier(0.42, 0, 0.58, 1)}.chip--filter .item__icon--leading.item__icon--hidden{display:none;opacity:0;width:0}.chip--filter .item__icon--leading.item__icon--hidden+.item__checkmark{height:1.25em;opacity:1;width:1.25em}.chip--filter .item--selected .item__icon--leading{opacity:0}.chip--filter .item--selected .item__checkmark-path{stroke-dashoffset:0}.chip--filter .item--selected .item__checkmark{margin-left:-0.25em;margin-right:0.25em}.chip--filter .item--selected .item__checkmark .item__checkmark-svg{height:1.25em;width:1.25em}.chip--input .item__icon--trailing{cursor:pointer;margin-left:0.25em;margin-right:-0.25em}.chip--input .item__icon--trailing:hover{opacity:0.75}.chip--input .item__icon--has-actions{-webkit-mask:var(--lf-icon-delete);mask:var(--lf-icon-delete);-webkit-mask-position:center;-webkit-mask-repeat:no-repeat;-webkit-mask-size:contain;mask-position:center;mask-repeat:no-repeat;mask-size:contain;background-color:rgba(var(--lf-chip-color-on-surface, var(--lf-color-on-surface)), 1);height:1.5em;width:1.5em;overflow:hidden}.item{border:0;border-style:solid;border-radius:var(--lf-chip-border-radius, var(--lf-ui-border-radius));background-color:rgba(var(--lf-chip-color-surface, var(--lf-color-surface)), 0.75);color:rgb(var(--lf-chip-color-on-surface, var(--lf-color-on-surface)));backdrop-filter:blur(8px);-webkit-backdrop-filter:blur(8px);font-size:1em;font-weight:400;line-height:1.6em;letter-spacing:0em;margin-bottom:0.5em;margin-left:1.5em;transition:all 300ms cubic-bezier(0.4, 0, 0.2, 1);align-items:center;box-shadow:1px 1px 2px 0px rgba(var(--lf-color-on-surface), 0.25), 0 0 1px 0 rgba(var(--lf-color-on-surface), 0.375);box-sizing:border-box;display:inline-flex;height:var(--lf-chip-item-height, 2em);margin:var(--lf-chip-item-margin, 0.25em);max-width:var(--lf-chip-item-max-width, max-content);outline:var(--lf-chip-item-outline, none);padding:var(--lf-chip-item-padding, 0 0.75em);position:relative;text-decoration:var(--lf-chip-item-text-decoration, inherit);text-transform:var(--lf-chip-item-text-transform, inherit)}.item__icon--leading:not(.chip__icon--hidden){margin-left:-0.25em;margin-right:0.35em}.item__icon{background-color:rgba(var(--lf-chip-color-on-surface, var(--lf-color-on-surface)), 1);height:1em;width:1em;overflow:hidden;display:block;outline:none}.item__icon--leading:not(.chip__icon--hidden){background-color:rgba(var(--lf-chip-color-on-surface, var(--lf-color-on-surface)), 1);height:1.25em;width:1.25em;overflow:hidden}.item__icon--trailing{margin-right:-0.25em;margin-left:0.35em}.item__checkmark-svg{transition:width 400ms cubic-bezier(0.8, -0.5, 0.2, 1.4);width:0;height:1.25em}.item__checkmark-path{transition:stroke-dashoffset 250ms cubic-bezier(0.34, 1.56, 0.64, 1);stroke-width:0.15em;stroke-dashoffset:29.7833385;stroke-dasharray:29.7833385}.item svg path{color:rgb(var(--lf-chip-color-on-surface, var(--lf-color-on-surface)));stroke:rgb(var(--lf-chip-color-on-surface, var(--lf-color-on-surface)))}.item__primary-action{outline:none}.item__primary-action .item__text{white-space:nowrap}.wrapper{align-items:center;display:flex}.wrapper--hidden .dropdown-icon{transform:unset}.wrapper__indent{width:calc(var(--lf-chip-margin, 0.25em) * var(--lf_chip_indent_offset) * var(--lf-chip-indent-multiplier, 10))}.wrapper__node{display:flex;flex-direction:column}.wrapper__node{-webkit-mask:var(--lf-icon-collapsed);mask:var(--lf-icon-collapsed);-webkit-mask-position:center;-webkit-mask-repeat:no-repeat;-webkit-mask-size:contain;mask-position:center;mask-repeat:no-repeat;mask-size:contain;background-color:rgba(var(--lf-chip-color-on-bg, var(--lf-color-on-bg)), 1);height:1.5em;width:1.5em;overflow:hidden;transition:transform 150ms cubic-bezier(0.42, 0, 0.58, 1);cursor:pointer;margin:0;overflow:hidden}.wrapper__node:hover{transform:scale(1.25)}.wrapper__node--expanded{-webkit-mask:var(--lf-icon-expanded);mask:var(--lf-icon-expanded);-webkit-mask-position:center;-webkit-mask-repeat:no-repeat;-webkit-mask-size:contain;mask-position:center;mask-repeat:no-repeat;mask-size:contain;background-color:rgba(var(--lf-chip-color-on-bg, var(--lf-color-on-bg)), 1);height:1.5em;width:1.5em;overflow:hidden}.wrapper__node--hidden{visibility:hidden}`;const At=(e,t)=>{if(e){const r=e.scrollLeft;e.scrollTo({left:t==="left"?r-200:r+200,behavior:"smooth"})}};var x,U,W,H,$,pt,ut,j,T,mt,bt,b=function(e,t,r,a){if(typeof t=="function"?e!==t||!0:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?a:r==="a"?a.call(e):a?a.value:t.get(e)},K=function(e,t,r,a,i){if(typeof t=="function"?e!==t||!0:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return t.set(e,r),r};const fe=class{constructor(e){gt(this,e),this.lfEvent=vt(this,"lf-tabbar-event"),this.value=null,this.lfDataset=null,this.lfNavigation=!1,this.lfRipple=!0,this.lfStyle="",this.lfUiSize="medium",this.lfUiState="primary",this.lfValue=null,x.set(this,void 0),U.set(this,Jt),W.set(this,_t),H.set(this,xt),$.set(this,Kt),pt.set(this,zt),ut.set(this,St),j.set(this,void 0),T.set(this,void 0),mt.set(this,t=>{const{get:r}=b(this,x,"f").assets,{bemClass:a}=b(this,x,"f").theme,{tab:i}=b(this,U,"f"),{style:s}=r(`./assets/svg/${t.icon}.svg`);return o("div",{class:a(i._,i.icon),"data-cy":b(this,W,"f").maskedSvg,style:s})}),bt.set(this,(t,r)=>{const{theme:a}=b(this,x,"f"),{bemClass:i}=a,{tab:s}=b(this,U,"f"),{lfRipple:n,value:l}=this,f=t===(l==null?void 0:l.node);return o("button",{"aria-selected":f,class:i(s._,null,{active:f}),"data-cy":b(this,W,"f").button,"data-lf":b(this,H,"f")[this.lfUiState],onClick:c=>{this.onLfEvent(c,"click",r,t)},onPointerDown:c=>{this.onLfEvent(c,"pointerdown",r,t)},part:b(this,$,"f").tab,role:"tab",tabIndex:r,title:(t==null?void 0:t.description)||""},o("div",{"data-cy":b(this,W,"f").rippleSurface,"data-lf":b(this,H,"f").rippleSurface,ref:c=>{c&&n&&b(this,j,"f").push(c)}}),o("span",{class:i(s._,s.content),"data-cy":b(this,W,"f").node},t.icon&&b(this,mt,"f").call(this,t),t.value&&o("span",{class:i(s._,s.label)},t.value)),o("span",{class:i(s._,s.indicator,{active:f})},o("span",{class:i(s._,s.indicatorContent,{active:!0})})))})}onLfEvent(e,t,r=0,a){const{effects:i}=b(this,x,"f");switch(t){case"click":this.value={index:r,node:a};break;case"pointerdown":this.lfRipple&&i.ripple(e,b(this,j,"f")[r])}this.lfEvent.emit({comp:this,eventType:t,id:this.rootElement.id,originalEvent:e,node:a})}async getDebugInfo(){return this.debugInfo}async getProps(){const e=Xt.map(t=>[t,this[t]]);return Object.fromEntries(e)}async getValue(){return this.value}async refresh(){yt(this)}async setValue(e){let t,r;return typeof e=="number"?(t=e,r=this.lfDataset.nodes[t]):typeof e=="string"&&(t=this.lfDataset.nodes.findIndex(a=>a.id===e),r=this.lfDataset.nodes[t]),this.value={index:t,node:r},this.value}async unmount(e=0){setTimeout(()=>{this.onLfEvent(new CustomEvent("unmount"),"unmount"),this.rootElement.remove()},e)}connectedCallback(){b(this,x,"f")&&b(this,x,"f").theme.register(this)}async componentWillLoad(){K(this,x,await Ct(this));const{debug:e}=b(this,x,"f"),{lfDataset:t,lfValue:r}=this;try{if(r!==null&&(typeof r=="number"&&(this.value={index:r,node:t.nodes[r]}),typeof r=="string")){const a=t.nodes.find(i=>i.id===r);this.value={index:t.nodes.indexOf(a),node:a}}}catch{e.logs.new(this,"Something went wrong while setting the initial selected value.","warning")}}componentDidLoad(){const{debug:e,drag:t}=b(this,x,"f");t.register.dragToScroll(b(this,T,"f")),this.onLfEvent(new CustomEvent("ready"),"ready"),e.info.update(this,"did-load")}componentWillRender(){const{debug:e}=b(this,x,"f");e.info.update(this,"will-render")}componentDidRender(){const{info:e}=b(this,x,"f").debug;e.update(this,"did-render")}render(){const{data:e,theme:t}=b(this,x,"f"),{bemClass:r,get:a,setLfStyle:i}=t,{"--lf-icon-next":s,"--lf-icon-previous":n}=a.current().variables,{tabbar:l}=b(this,U,"f"),{lfDataset:f,lfStyle:c}=this;if(!e.node.exists(f))return;K(this,j,[]);const d=f.nodes;return o(kt,null,c&&o("style",{id:b(this,pt,"f")},i(this)),o("div",{id:b(this,ut,"f")},o("div",{class:r(l._),part:b(this,$,"f").tabbbar,role:"tablist"},this.lfNavigation&&o("lf-button",{lfIcon:n,lfStretchY:!0,lfStyling:"flat",lfUiSize:this.lfUiSize,"onLf-button-event":()=>At(b(this,T,"f"),"left")}),o("div",{class:r(l._,l.scroll),ref:p=>{p&&K(this,T,p)}},d.map((p,m)=>b(this,bt,"f").call(this,p,m))),this.lfNavigation&&o("lf-button",{lfIcon:s,lfStretchY:!0,lfStyling:"flat",lfUiSize:this.lfUiSize,"onLf-button-event":()=>At(b(this,T,"f"),"right")}))))}disconnectedCallback(){var e,t,r;(e=b(this,x,"f"))!=null&&e.drag.getActiveSession(b(this,T,"f"))&&((t=b(this,x,"f"))==null||t.drag.unregister.dragToScroll(b(this,T,"f"))),(r=b(this,x,"f"))==null||r.theme.unregister(this)}get rootElement(){return wt(this)}};x=new WeakMap,U=new WeakMap,W=new WeakMap,H=new WeakMap,$=new WeakMap,pt=new WeakMap,ut=new WeakMap,j=new WeakMap,T=new WeakMap,mt=new WeakMap,bt=new WeakMap,fe.style=`::-webkit-scrollbar{width:9px}::-webkit-scrollbar-thumb{transition:all 400ms cubic-bezier(0.8, -0.5, 0.2, 1.4);background-color:rgb(var(--lf-color-primary))}::-webkit-scrollbar-track{background-color:rgb(var(--lf-color-bg))}[data-lf=ripple]{animation-duration:var(--lf-ui-duration-ripple, 675ms);animation-fill-mode:forwards;animation-name:lf-ripple;animation-timing-function:var(--lf-ui-timing-ripple, ease-out);background:var(--lf-ui-ripple-background, var(--lf-color-primary));border-radius:var(--lf-ui-radius-ripple, 50%);height:var(--lf-ui-ripple-height, 100%);left:var(--lf-ui-ripple-x, 50%);opacity:var(--lf-ui-opacity-ripple, 0.5);pointer-events:none;position:absolute;top:var(--lf-ui-ripple-y, 50%);transform:scale(0);width:var(--lf-ui-ripple-width, 100%)}@keyframes lf-ripple{from{transform:scale(0)}to{opacity:0;transform:scale(4)}}[data-lf=ripple-surface]{cursor:pointer;height:100%;left:0;overflow:hidden;position:absolute;top:0;width:100%}[data-lf=danger]{--lf-tabbar-color-primary:var(
    --lf-tabbar-color-danger,
    var(--lf-color-danger)
  );--lf-tabbar-color-on-primary:var(
    --lf-tabbar-color-danger,
    var(--lf-color-on-danger)
  )}[data-lf=disabled]{opacity:var(--lf-tabbar-ui-opacity-disabled, var(--lf-ui-opacity-disabled));pointer-events:none}[data-lf=info]{--lf-tabbar-color-primary:var(
    --lf-tabbar-color-info,
    var(--lf-color-info)
  );--lf-tabbar-color-on-primary:var(
    --lf-tabbar-color-info,
    var(--lf-color-on-info)
  )}[data-lf=secondary]{--lf-tabbar-color-primary:var(
    --lf-tabbar-color-secondary,
    var(--lf-color-secondary)
  );--lf-tabbar-color-on-primary:var(
    --lf-tabbar-color-secondary,
    var(--lf-color-on-secondary)
  )}[data-lf=success]{--lf-tabbar-color-primary:var(
    --lf-tabbar-color-success,
    var(--lf-color-success)
  );--lf-tabbar-color-on-primary:var(
    --lf-tabbar-color-success,
    var(--lf-color-on-success)
  )}[data-lf=warning]{--lf-tabbar-color-primary:var(
    --lf-tabbar-color-warning,
    var(--lf-color-warning)
  );--lf-tabbar-color-on-primary:var(
    --lf-tabbar-color-warning,
    var(--lf-color-on-warning)
  )}:host{display:block;font-family:var(--lf-tabbar-font-family, var(--lf-font-family-primary));font-size:var(--lf-tabbar-font-size, var(--lf-font-size))}:host([lf-ui-size=large]){font-size:calc(
        var(--lf-tabbar-font-size, var(--lf-font-size)) * var(--lf-ui-size-large)
      )}:host([lf-ui-size=medium]){font-size:calc(
        var(--lf-tabbar-font-size, var(--lf-font-size)) * var(--lf-ui-size-medium)
      )}:host([lf-ui-size=small]){font-size:calc(
        var(--lf-tabbar-font-size, var(--lf-font-size)) * var(--lf-ui-size-small)
      )}:host([lf-ui-size=xlarge]){font-size:calc(
        var(--lf-tabbar-font-size, var(--lf-font-size)) * var(--lf-ui-size-xlarge)
      )}:host([lf-ui-size=xsmall]){font-size:calc(
        var(--lf-tabbar-font-size, var(--lf-font-size)) * var(--lf-ui-size-xsmall)
      )}:host([lf-ui-size=xxlarge]){font-size:calc(
        var(--lf-tabbar-font-size, var(--lf-font-size)) * var(--lf-ui-size-xxlarge)
      )}:host([lf-ui-size=xxsmall]){font-size:calc(
        var(--lf-tabbar-font-size, var(--lf-font-size)) * var(--lf-ui-size-xxsmall)
      )}#lf-component{width:100%;height:100%}:host{width:100%}.tabbar{display:flex;height:var(--lf-tabbar-height, 2.25em);width:100%}.tabbar__scroll{display:flex;overflow:hidden;width:100%}.tab{font-family:var(--lf-tabbar-font-family, var(--lf-font-family-primary));background-color:rgba(var(--lf-tabbar-color-bg, var(--lf-color-bg)), 0.375);color:rgb(var(--lf-tabbar-color-on-bg, var(--lf-color-on-bg)));backdrop-filter:blur(8px);-webkit-backdrop-filter:blur(8px);transition:all 300ms cubic-bezier(0.4, 0, 0.2, 1);appearance:none;border:none;box-sizing:border-box;cursor:pointer;display:flex;flex:1 0 auto;height:100%;justify-content:center;margin:0;min-width:var(--lf-tabbar-min-width, 5em);outline:none;padding:var(--lf-tabbar-tab-padding, 0 1.25em);position:relative;text-align:center}.tab:first-child{border:0;border-style:solid;border-radius:var(--lf-tabbar-border-radius, var(--lf-ui-border-radius));border-bottom-left-radius:0;border-bottom-right-radius:0;border-top-right-radius:0}.tab:last-child{border:0;border-style:solid;border-radius:var(--lf-tabbar-border-radius, var(--lf-ui-border-radius));border-bottom-left-radius:0;border-bottom-right-radius:0;border-top-left-radius:0}.tab:hover{background-color:rgba(var(--lf-tabbar-color-primary, var(--lf-color-primary)), 0.125);backdrop-filter:blur(8px);-webkit-backdrop-filter:blur(8px)}.tab--active{background-color:rgba(var(--lf-tabbar-color-primary, var(--lf-color-primary)), 0.225);backdrop-filter:blur(8px);-webkit-backdrop-filter:blur(8px)}.tab--active:hover{background-color:rgba(var(--lf-tabbar-color-primary, var(--lf-color-primary)), 0.325);backdrop-filter:blur(8px);-webkit-backdrop-filter:blur(8px)}.tab--active .tab__icon{background-color:rgba(var(--lf-tabbar-color-primary, var(--lf-color-primary)), 1)}.tab--active .tab__label{color:rgb(var(--lf-tabbar-color-primary, var(--lf-color-primary)));font-weight:600;opacity:1}.tab__icon{background-color:rgba(var(--lf-tabbar-color-on-bg, var(--lf-color-on-bg)), 1);height:1.5em;width:1.5em;overflow:hidden;transition:all 300ms cubic-bezier(0.4, 0, 0.2, 1)}.tab__content{align-items:center;display:flex;height:inherit;justify-content:center;pointer-events:none;position:relative}.tab__label{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-size:0.775em;letter-spacing:0.0892857143em;line-height:inherit;text-transform:uppercase;opacity:0.75}.tab__icon+.tab__label{padding-left:0.5em;padding-right:0}.tab__indicator{width:100%;height:100%;transition:all 300ms cubic-bezier(0.4, 0, 0.2, 1);display:flex;justify-content:center;left:0;pointer-events:none;position:absolute;top:0}.tab__indicator--active .tab__indicator-content{opacity:1}.tab__indicator-content{transition:all 400ms cubic-bezier(0.8, -0.5, 0.2, 1.4);opacity:0;transform-origin:left center}.tab__indicator-content--active{align-self:flex-end;border-color:rgb(var(--lf-tabbar-color-indicator, var(--lf-tabbar-color-primary)));border-top-style:solid;border-top-width:2px;box-sizing:border-box;width:100%}`;export{le as lf_chat,ce as lf_chip,fe as lf_tabbar};
