import{o as ue,V as ve,m as pe,D as u,L as ge,T as ye,k as fe}from"./lf-core-C0TwNeAf.js";import{ay as Ce,C as be,az as Se,l as we,n as ke,aA as _e,aB as he,aC as Me,c as Pe,aD as We,aE as le,aF as Ee,aG as S}from"./theme.constants-_3bg_1Hx.js";import{o as xe}from"./p-558ec216-av2_KWVh.js";import"./preload-helper-C1FmrZbK.js";const Ae={get:(e,t)=>{const{height:s,left:a,top:n,width:i}=t;let o=e.clientX-a,r=e.clientY-n;return o=Math.max(0,Math.min(i,o)),r=Math.max(0,Math.min(s,r)),{x:o,y:r}},normalize:(e,t)=>{const{height:s,left:a,top:n,width:i}=t;let o=(e.clientX-a)/i,r=(e.clientY-n)/s;return o=Math.max(0,Math.min(1,o)),r=Math.max(0,Math.min(1,r)),{x:o,y:r}},simplify:(e,t)=>{if(e.length<=2)return e;function s(i,o){const r=i.x-o.x,l=i.y-o.y;return r*r+l*l}function a(i,o,r){const l=o.x-i.x,f=o.y-i.y,d=((r.x-i.x)*l+(r.y-i.y)*f)/(l*l+f*f);return{x:i.x+d*l,y:i.y+d*f}}const n=[e[0]];return function i(o,r,l,f){let d=l,m=-1;for(let p=o+1;p<r;p++){const g=s(e[p],a(e[o],e[r],e[p]));g>d&&(m=p,d=g)}d>l&&(m-o>1&&i(o,m,l,f),f.push(e[m]),r-m>1&&i(m,r,l,f))}(0,e.length-1,t*t,n),n.push(e[e.length-1]),n}},Le=e=>({clear:t=>{const{ctx:s,height:a,width:n}=e().toolkit.ctx.get(t);s.clearRect(0,0,n,a)},get:t=>{const{board:s,preview:a}=e().elements.refs,n=(t==="board"?s:a).getContext("2d"),{height:i,width:o}=n.canvas;return{ctx:n,height:i,width:o}},redraw:t=>{const{controller:s,toolkit:a}=e(),{points:n}=s.get,{ctx:i,height:o,width:r}=a.ctx.get(t);a.ctx.clear(t),a.ctx.setup(t);const l=n();if(l.length===1){const f=l[0];a.draw.shape(t,f.x*r,f.y*o,!0)}else if(l.length>1){i.beginPath();const f=l[0];i.moveTo(f.x*r,f.y*o);for(let d=1;d<l.length;d++){const m=l[d];i.lineTo(m.x*r,m.y*o)}i.stroke()}},setup:(t,s=!1)=>{const{controller:a,toolkit:n}=e(),{lfColor:i,lfOpacity:o,lfSize:r}=a.get.compInstance,{ctx:l}=n.ctx.get(t);l.lineCap="round",l.lineJoin="round",l.globalAlpha=o,l.globalCompositeOperation="source-over",s?l.fillStyle=i:(l.strokeStyle=i,l.lineWidth=r)}}),Ie=e=>({cursor:t=>{const{elements:s,toolkit:a}=e(),{board:n}=s.refs;a.ctx.clear("preview");const i=n.getBoundingClientRect(),{x:o,y:r}=a.coordinates.get(t,i);a.ctx.setup("preview",!0),a.draw.shape("preview",o,r,!0)},point:t=>{const{controller:s,elements:a,toolkit:n}=e(),{board:i}=a.refs,{points:o}=s.get,r=i.getBoundingClientRect(),{x:l,y:f}=n.coordinates.normalize(t,r);o().push({x:l,y:f})},shape:(t,s,a,n=!0)=>{const{controller:i,toolkit:o}=e(),{lfBrush:r,lfSize:l}=i.get.compInstance,{ctx:f}=o.ctx.get(t);switch(f.beginPath(),r){case"round":f.lineJoin="round",f.lineCap="round",f.arc(s,a,l/2,0,2*Math.PI);break;case"square":f.lineJoin="miter",f.lineCap="butt";const d=l/2;f.rect(Math.round(s)-d,Math.round(a)-d,l,l)}n?f.fill():f.stroke()}}),Te=e=>(t=>({board:()=>{const{controller:s,elements:a,handlers:n}=t(),{refs:i}=a,{blocks:o,cyAttributes:r,manager:l,parts:f}=s.get,{assignRef:d,theme:m}=l,{bemClass:p}=m,{onPointerDown:g,onPointerMove:y,onPointerOut:w,onPointerUp:k}=n.board;return u("canvas",{class:p(o.canvas._,o.canvas.board),"data-cy":r.canvas,onPointerDown:g,onPointerMove:y,onPointerOut:w,onPointerUp:k,part:f.board,ref:d(i,"board")})},image:()=>{const{controller:s,elements:a}=t(),{refs:n}=a,{blocks:i,compInstance:o,cyAttributes:r,manager:l,parts:f}=s.get,{assignRef:d,sanitizeProps:m,theme:p}=l,{bemClass:g}=p;return u("lf-image",{...m(o.lfImageProps,"LfImage"),class:g(i.canvas._,i.canvas.image),"data-cy":r.image,part:f.image,ref:d(n,"image")})},preview:()=>{const{controller:s,elements:a}=t(),{blocks:n,cyAttributes:i,manager:o,parts:r}=s.get,{assignRef:l,theme:f}=o,{refs:d}=a,{bemClass:m}=f;return u("canvas",{class:m(n.canvas._,n.canvas.preview),"data-cy":i.canvas,part:r.preview,ref:l(d,"preview")})}}))(e),Re=e=>(t=>({board:{endCapture:s=>{s.preventDefault();const{controller:a,elements:n,toolkit:i}=t(),{get:o,set:r}=a,{compInstance:l,isCursorPreview:f,points:d}=o,{board:m}=n.refs,{lfPreview:p}=l,g=l;m.releasePointerCapture(s.pointerId);const{ctx:y,height:w,width:k}=i.ctx.get("board"),_=d();if(_.length>0)if(_.length===1){i.ctx.setup("board",!0);const M=_[0];i.draw.shape("board",M.x*k,M.y*w,!0)}else{i.ctx.setup("board"),y.beginPath();const M=_[0];y.moveTo(M.x*k,M.y*w);for(let I=1;I<_.length;I++){const ce=_[I];y.lineTo(ce.x*k,ce.y*w)}y.stroke()}(f()||p)&&i.ctx.clear("preview"),g.onLfEvent(s,"stroke"),r.isPainting(!1)},onPointerDown:s=>{s.preventDefault();const{controller:a,elements:n,toolkit:i}=t(),{set:o}=a,{board:r}=n.refs;r.setPointerCapture(s.pointerId),requestAnimationFrame(()=>{o.isPainting(!0),o.points([]),i.draw.point(s)})},onPointerMove:s=>{s.preventDefault();const{controller:a,toolkit:n}=t(),{compInstance:i,isCursorPreview:o,isPainting:r}=a.get,{lfPreview:l}=i;r()?(o()&&n.draw.cursor(s),n.draw.point(s),l&&n.ctx.redraw("preview")):o()&&n.draw.cursor(s)},onPointerOut:s=>{const{controller:a,handlers:n}=t(),{isPainting:i}=a.get,{endCapture:o}=n.board;i()&&o(s)},onPointerUp:s=>{const{handlers:a}=t(),{endCapture:n}=a.board;n(s)}}}))(e),De=e=>({ctx:Le(e),coordinates:Ae,draw:Ie(e)});var z,x,O,Y,F,U,$,P,A,j,b,J,C,h=function(e,t,s,a){if(s==="a"&&!a)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!a:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return s==="m"?a:s==="a"?a.call(e):a?a.value:t.get(e)},T=function(e,t,s,a,n){if(typeof t=="function"?e!==t||!0:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return t.set(e,s),s};const Ve=class{constructor(e){ue(this,e),this.lfEvent=ve(this,"lf-canvas-event"),z.add(this),this.isPainting=!1,this.points=[],this.lfBrush="round",this.lfColor="#ff0000",this.lfCursor="preview",this.lfImageProps=null,this.lfOpacity=1,this.lfPreview=!0,this.lfStrokeTolerance=null,this.lfSize=10,this.lfStyle="",x.set(this,void 0),O.set(this,Ce),Y.set(this,be),F.set(this,Se),U.set(this,we),$.set(this,ke),P.set(this,void 0),A.set(this,void 0),j.set(this,void 0),b.set(this,void 0),J.set(this,()=>{var t;T(this,b,{controller:{get:{blocks:h(this,O,"f"),compInstance:this,cyAttributes:h(this,Y,"f"),isCursorPreview:()=>h(this,z,"m",C).call(this),isPainting:()=>this.isPainting,manager:h(this,x,"f"),parts:h(this,F,"f"),points:()=>this.points},set:{isPainting:s=>this.isPainting=s,points:s=>this.points=s}},elements:{jsx:Te(t=()=>h(this,b,"f")),refs:{board:null,image:null,preview:null}},handlers:Re(t),toolkit:De(t)})})}onLfEvent(e,t){const{coordinates:s}=h(this,b,"f").toolkit,{lfStrokeTolerance:a,points:n,rootElement:i}=this;this.lfEvent.emit({comp:this,id:i.id,originalEvent:e,eventType:t,points:a!==null&&(n!=null&&n.length)?s.simplify(n,a):n})}async clearCanvas(e="board"){const{clear:t}=h(this,b,"f").toolkit.ctx;t(e)}async getCanvas(e="board"){const{board:t,preview:s}=h(this,b,"f").elements.refs;return e==="board"?t:s}async getDebugInfo(){return this.debugInfo}async getImage(){const{image:e}=h(this,b,"f").elements.refs;return e}async getProps(){const e=_e.map(t=>[t,this[t]]);return Object.fromEntries(e)}async refresh(){pe(this)}async resizeCanvas(){const{board:e,preview:t}=h(this,b,"f").elements.refs,{height:s,width:a}=h(this,P,"f").getBoundingClientRect();e.height=s,e.width=a,h(this,z,"m",C).call(this)&&(t.height=s,t.width=a)}async setCanvasHeight(e){const{board:t,preview:s}=h(this,b,"f").elements.refs;if(e!==void 0)t.height=e,h(this,z,"m",C).call(this)&&(s.height=e);else{const{height:a}=h(this,P,"f").getBoundingClientRect();t.height=a,h(this,z,"m",C).call(this)&&(s.height=a)}}async setCanvasWidth(e){const{board:t,preview:s}=h(this,b,"f").elements.refs;if(e!==void 0)t.width=e,h(this,z,"m",C).call(this)&&(s.width=e);else{const{width:a}=h(this,P,"f").getBoundingClientRect();t.width=a,h(this,z,"m",C).call(this)&&(s.width=a)}}async unmount(e=0){setTimeout(()=>{this.onLfEvent(new CustomEvent("unmount"),"unmount"),this.rootElement.remove()},e)}connectedCallback(){h(this,x,"f")&&h(this,x,"f").theme.register(this)}async componentWillLoad(){T(this,x,await xe(this)),h(this,J,"f").call(this)}componentDidLoad(){const{info:e}=h(this,x,"f").debug;this.resizeCanvas(),T(this,A,new ResizeObserver(()=>{clearTimeout(h(this,j,"f")),T(this,j,setTimeout(()=>{this.resizeCanvas()},100),"f")})),h(this,A,"f").observe(h(this,P,"f")),this.onLfEvent(new CustomEvent("ready"),"ready"),e.update(this,"did-load")}componentWillRender(){const{info:e}=h(this,x,"f").debug;e.update(this,"will-render")}componentDidRender(){const{info:e}=h(this,x,"f").debug;e.update(this,"did-render")}render(){const{bemClass:e,setLfStyle:t}=h(this,x,"f").theme,{board:s,image:a,preview:n}=h(this,b,"f").elements.jsx,{lfStyle:i}=this,o=h(this,z,"m",C).call(this)||this.lfPreview,{canvas:r}=h(this,O,"f");return u(ge,{key:"197be8de5e7ef4a89d2332aa00df9ea229065f9b"},i&&u("style",{key:"a1de92be2a6b3c2a0306733dd5035600856e00a6",id:h(this,U,"f")},t(this)),u("div",{key:"e58d202ace57f68508778a86797a96d0c5f4c2e7",id:h(this,$,"f")},u("div",{key:"746ae067b3d888c4961b514f94cab05db7d46969",class:e(r._,null,{hidden:h(this,z,"m",C).call(this)}),part:h(this,F,"f").canvas,ref:l=>{l&&T(this,P,l)}},a(),s(),o&&n())))}disconnectedCallback(){var e;(e=h(this,x,"f"))==null||e.theme.unregister(this),h(this,A,"f")&&h(this,A,"f").disconnect()}get rootElement(){return ye(this)}};x=new WeakMap,O=new WeakMap,Y=new WeakMap,F=new WeakMap,U=new WeakMap,$=new WeakMap,P=new WeakMap,A=new WeakMap,j=new WeakMap,b=new WeakMap,J=new WeakMap,z=new WeakSet,C=function(){return this.lfCursor==="preview"},Ve.style=`::-webkit-scrollbar{width:9px}::-webkit-scrollbar-thumb{transition:all 400ms cubic-bezier(0.8, -0.5, 0.2, 1.4);background-color:rgb(var(--lf-color-primary))}::-webkit-scrollbar-track{background-color:rgb(var(--lf-color-bg))}[data-lf=danger]{--lf-canvas-color-primary:var(
    --lf-canvas-color-danger,
    var(--lf-color-danger)
  );--lf-canvas-color-on-primary:var(
    --lf-canvas-color-danger,
    var(--lf-color-on-danger)
  )}[data-lf=disabled]{opacity:var(--lf-canvas-ui-opacity-disabled, var(--lf-ui-opacity-disabled));pointer-events:none}[data-lf=info]{--lf-canvas-color-primary:var(
    --lf-canvas-color-info,
    var(--lf-color-info)
  );--lf-canvas-color-on-primary:var(
    --lf-canvas-color-info,
    var(--lf-color-on-info)
  )}[data-lf=secondary]{--lf-canvas-color-primary:var(
    --lf-canvas-color-secondary,
    var(--lf-color-secondary)
  );--lf-canvas-color-on-primary:var(
    --lf-canvas-color-secondary,
    var(--lf-color-on-secondary)
  )}[data-lf=success]{--lf-canvas-color-primary:var(
    --lf-canvas-color-success,
    var(--lf-color-success)
  );--lf-canvas-color-on-primary:var(
    --lf-canvas-color-success,
    var(--lf-color-on-success)
  )}[data-lf=warning]{--lf-canvas-color-primary:var(
    --lf-canvas-color-warning,
    var(--lf-color-warning)
  );--lf-canvas-color-on-primary:var(
    --lf-canvas-color-warning,
    var(--lf-color-on-warning)
  )}:host{display:block;font-family:var(--lf-canvas-font-family, var(--lf-font-family-primary));font-size:var(--lf-canvas-font-size, var(--lf-font-size))}:host([lf-ui-size=large]){font-size:calc(
        var(--lf-canvas-font-size, var(--lf-font-size)) * var(--lf-ui-size-large)
      )}:host([lf-ui-size=medium]){font-size:calc(
        var(--lf-canvas-font-size, var(--lf-font-size)) * var(--lf-ui-size-medium)
      )}:host([lf-ui-size=small]){font-size:calc(
        var(--lf-canvas-font-size, var(--lf-font-size)) * var(--lf-ui-size-small)
      )}:host([lf-ui-size=xlarge]){font-size:calc(
        var(--lf-canvas-font-size, var(--lf-font-size)) * var(--lf-ui-size-xlarge)
      )}:host([lf-ui-size=xsmall]){font-size:calc(
        var(--lf-canvas-font-size, var(--lf-font-size)) * var(--lf-ui-size-xsmall)
      )}:host([lf-ui-size=xxlarge]){font-size:calc(
        var(--lf-canvas-font-size, var(--lf-font-size)) * var(--lf-ui-size-xxlarge)
      )}:host([lf-ui-size=xxsmall]){font-size:calc(
        var(--lf-canvas-font-size, var(--lf-font-size)) * var(--lf-ui-size-xxsmall)
      )}#lf-component{width:100%;height:100%}:host{width:100%;height:100%;position:relative}.canvas{width:100%;height:100%;margin:var(--lf-canvas-margin, auto);max-height:var(--lf-canvas-max-height, max-content);max-width:var(--lf-canvas-max-width, max-content);position:var(--lf-canvas-position, relative);touch-action:none}.canvas--hidden{cursor:none}.canvas__image{--lf-image-object-fit:var(--lf-canvas-object-fit, contain);pointer-events:none;user-select:none}.canvas__board,.canvas__preview{width:100%;height:100%;left:0;position:absolute;top:0}.canvas__preview{pointer-events:none}`;const de=e=>Number(e.rootElement.style.getPropertyValue(le.columns)),me=(e,t)=>Number(e.rootElement.style.setProperty(le.columns,String(t))),Oe=e=>(t=>({addColumn:()=>{const{controller:s,elements:a,handlers:n}=t(),{refs:i}=a,{button:o}=n,{blocks:r,cyAttributes:l,lfAttributes:f,manager:d,parts:m}=s.get,{assignRef:p,theme:g}=d,{bemClass:y,get:w}=g,{"--lf-icon-plus":k}=w.current().variables;return u("lf-button",{class:y(r.grid._,r.grid.addColumn),"data-cy":l.button,"data-lf":f.fadeIn,id:S.addColumn,key:S.addColumn,lfIcon:k,lfStyling:"floating",lfUiSize:"small","onLf-button-event":o,part:m.addColumn,ref:p(i,"addColumn"),title:"Click to add a column to the masonry."})},removeColumn:()=>{const{controller:s,elements:a,handlers:n}=t(),{refs:i}=a,{button:o}=n,{blocks:r,cyAttributes:l,lfAttributes:f,manager:d,parts:m}=s.get,{assignRef:p,theme:g}=d,{bemClass:y,get:w}=g,{"--lf-icon-minus":k}=w.current().variables;return u("lf-button",{class:y(r.grid._,r.grid.removeColumn),"data-cy":l.button,"data-lf":f.fadeIn,id:S.removeColumn,key:S.removeColumn,lfIcon:k,lfStyling:"floating",lfUiSize:"small","onLf-button-event":o,part:m.removeColumn,ref:p(i,"removeColumn"),title:"Click to remove a column from the masonry."})},changeView:()=>{const{controller:s,elements:a,handlers:n}=t(),{refs:i}=a,{blocks:o,cyAttributes:r,isMasonry:l,isVertical:f,manager:d,parts:m}=s.get,{button:p}=n,{assignRef:g,theme:y}=d,{bemClass:w,get:k}=y,{layoutBoardSplit:_,viewportTall:M,viewportWide:I}=k.icons();return u("lf-button",{class:w(o.grid._,o.grid.changeViewe),"data-cy":r.button,id:S.masonry,key:S.masonry,lfIcon:l()?M:f()?I:_,lfStyling:"floating","onLf-button-event":p,part:m.changeView,ref:g(i,"changeView"),title:l()?"Click to view the images arranged vertically.":f()?"Click to view the images arranged horizontally.":"Click to view the images arranged in a masonry."})}}))(e),Fe=e=>(t=>({button:s=>{const{eventType:a,id:n}=s.detail;if(a==="click")switch(n){case S.masonry:(async i=>{const{compInstance:o,isMasonry:r,isVertical:l}=i.controller.get;o.lfView=r()?"vertical":l()?"horizontal":"main"})(t());break;case S.removeColumn:(async i=>{const{compInstance:o,currentColumns:r}=i.controller.get,l=o,f=de(l)||r();f>1&&me(l,f-1)})(t());break;case S.addColumn:(async i=>{const{compInstance:o,currentColumns:r}=i.controller.get,l=o,f=de(l)||r();me(l,f+1)})(t())}}}))(e);var q,v,W,K,L,X,G,H,Q,E,B,R,Z,ee,D,te,se,ae,ze,ne,N,ie,oe,re,c=function(e,t,s,a){if(s==="a"&&!a)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!a:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return s==="m"?a:s==="a"?a.call(e):a?a.value:t.get(e)},V=function(e,t,s,a,n){if(typeof t=="function"?e!==t||!0:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return t.set(e,s),s};const je=class{constructor(e){ue(this,e),this.lfEvent=ve(this,"lf-masonry-event"),q.add(this),this.selectedShape={},this.shapes={},this.lfActions=!1,this.lfColumns=Array.from(he),this.lfDataset=null,this.lfSelectable=!1,this.lfShape="image",this.lfStyle="",this.lfView="main",v.set(this,void 0),W.set(this,Me),K.set(this,be),L.set(this,Pe),X.set(this,We),G.set(this,we),H.set(this,le),Q.set(this,ke),E.set(this,void 0),B.set(this,void 0),R.set(this,void 0),Z.set(this,()=>{var t;V(this,R,{controller:{get:{blocks:c(this,W,"f"),compInstance:this,currentColumns:()=>c(this,E,"f"),cyAttributes:c(this,K,"f"),isMasonry:()=>c(this,D,"f").call(this),isVertical:()=>c(this,te,"f").call(this),lfAttributes:c(this,L,"f"),manager:c(this,v,"f"),parts:c(this,X,"f"),shapes:()=>this.shapes}},elements:{jsx:Oe(t=()=>c(this,R,"f")),refs:{addColumn:null,removeColumn:null,changeView:null}},handlers:Fe(t)})}),ee.set(this,()=>{var t;return!!((t=this.shapes)!=null&&t[this.lfShape])}),D.set(this,()=>this.lfView==="main"),te.set(this,()=>this.lfView==="vertical"),se.set(this,(t,s)=>()=>{clearTimeout(c(this,B,"f")),V(this,B,setTimeout(t,s))}),ae.set(this,t=>t.every((s,a,n)=>a===0||n[a-1]<s)),ne.set(this,()=>{const{decorate:t}=c(this,v,"f").data.cell.shapes,{lfShape:s,selectedShape:a,shapes:n}=this,i=n[this.lfShape].map(()=>({htmlProps:{dataset:{lf:c(this,L,"f").fadeIn,selected:""}}}));a.index!==void 0&&(i[a.index]={htmlProps:{dataset:{lf:c(this,L,"f").fadeIn,selected:"true"}}});const o=Array.from({length:c(this,E,"f")},()=>[],[]);return t(s,n[s],async r=>this.onLfEvent(r,"lf-event"),i).forEach((r,l)=>{r.t["data-index"]=l.toString(),o[l%c(this,E,"f")].push(r)}),o}),N.set(this,c(this,se,"f").call(this,()=>{this.viewportWidth=window.innerWidth},200)),ie.set(this,()=>{const{bemClass:t}=c(this,v,"f").theme,{grid:s}=c(this,W,"f"),{addColumn:a,changeView:n,removeColumn:i}=c(this,R,"f").elements.jsx;return u("div",{class:t(s._,s.actions),"data-lf":c(this,L,"f").fadeIn},c(this,D,"f").call(this)&&u("div",{class:t(s._,s.sub)},a(),i()),n())}),oe.set(this,()=>{const{bemClass:t}=c(this,v,"f").theme,{grid:s}=c(this,W,"f");return c(this,ne,"f").call(this).map((a,n)=>u("div",{key:n,class:t(s._,s.column)},a.map(i=>u(fe,null,i))))}),re.set(this,()=>{var r;const{bemClass:t}=c(this,v,"f").theme,{grid:s}=c(this,W,"f"),{lfActions:a,lfShape:n,lfView:i,shapes:o}=this;return c(this,ee,"f").call(this)&&((r=o[n])!=null&&r.length)?u(fe,null,u("div",{class:t(s._,null,{[i]:!0})},c(this,oe,"f").call(this)),a&&c(this,ie,"f").call(this)):null})}onLfEvent(e,t){const{lfSelectable:s,lfShape:a,selectedShape:n,shapes:i}=this;let o=!1;const r={};if(t==="lf-event"){const{comp:l,eventType:f}=e.detail;if(f==="click"&&s){const d=parseInt(l.rootElement.dataset.index);n.index!==d&&(r.index=d,r.shape=i[a][d]),o=!0}}o&&(this.selectedShape=r),this.lfEvent.emit({comp:this,eventType:t,id:this.rootElement.id,originalEvent:e,selectedShape:this.selectedShape})}validateColumns(){const{debug:e}=c(this,v,"f");Array.isArray(this.lfColumns)&&!c(this,ae,"f").call(this,this.lfColumns)&&(e.logs.new(this,"Invalid breakpoints in lfColumns: must be sorted in ascending order.","warning"),this.lfColumns=[...he])}async updateShapes(){const{data:e,debug:t}=c(this,v,"f");try{this.shapes=e.cell.shapes.getAll(this.lfDataset)}catch(s){t.logs.new(this,"Error updating shapes: "+s,"error")}}async getDebugInfo(){return this.debugInfo}async getProps(){const e=Ee.map(t=>[t,this[t]]);return Object.fromEntries(e)}async getSelectedShape(){return this.selectedShape}async redecorateShapes(){this.updateShapes()}async refresh(){pe(this)}async setSelectedShape(e){var a,n;const{debug:t}=c(this,v,"f"),s=(n=(a=this.shapes)==null?void 0:a[this.lfShape])==null?void 0:n[e];s?this.selectedShape={index:e,shape:s}:(this.selectedShape={},t.logs.new(this,`Couldn't set shape with index: ${e}`)),this.updateShapes()}async unmount(e=0){setTimeout(()=>{this.onLfEvent(new CustomEvent("unmount"),"unmount"),this.rootElement.remove()},e)}connectedCallback(){c(this,v,"f")&&c(this,v,"f").theme.register(this)}async componentWillLoad(){V(this,v,await xe(this)),c(this,Z,"f").call(this),this.updateShapes()}componentDidLoad(){window.addEventListener("resize",c(this,N,"f")),this.viewportWidth=window.innerWidth;const{info:e}=c(this,v,"f").debug;this.onLfEvent(new CustomEvent("ready"),"ready"),e.update(this,"did-load")}componentWillRender(){const{info:e}=c(this,v,"f").debug;V(this,E,c(this,D,"f").call(this)?c(this,q,"m",ze).call(this):1),e.update(this,"will-render")}componentDidRender(){const{info:e}=c(this,v,"f").debug;e.update(this,"did-render")}render(){const{bemClass:e,setLfStyle:t}=c(this,v,"f").theme,{masonry:s}=c(this,W,"f"),{lfStyle:a}=this,n={[c(this,H,"f").columns]:String(c(this,E,"f"))};return u(ge,{key:"375bf09323a2f550d458f57552547050a0ab718e",style:n},a&&u("style",{key:"40dad6e8e871d6a7f63baf56708dd44d1e6c0a36",id:c(this,G,"f")},t(this)),u("div",{key:"b03c19157c1ec38999f967049e207d49ec67f747",id:c(this,Q,"f")},u("div",{key:"69a9dc7ababe2f701b5f0b773d489d8f01f87ec3",class:e(s._)},c(this,re,"f").call(this))))}disconnectedCallback(){var e;(e=c(this,v,"f"))==null||e.theme.unregister(this),window.removeEventListener("resize",c(this,N,"f"))}get rootElement(){return ye(this)}static get watchers(){return{lfColumns:["validateColumns"],lfDataset:["updateShapes"],lfShape:["updateShapes"]}}};v=new WeakMap,W=new WeakMap,K=new WeakMap,L=new WeakMap,X=new WeakMap,G=new WeakMap,H=new WeakMap,Q=new WeakMap,E=new WeakMap,B=new WeakMap,R=new WeakMap,Z=new WeakMap,ee=new WeakMap,D=new WeakMap,te=new WeakMap,se=new WeakMap,ae=new WeakMap,ne=new WeakMap,N=new WeakMap,ie=new WeakMap,oe=new WeakMap,re=new WeakMap,q=new WeakSet,ze=function(){var n,i;const{lfColumns:e,viewportWidth:t,shapes:s,lfShape:a}=this;if(typeof e=="number")return Math.min(e,((n=s[a])==null?void 0:n.length)||0);if(Array.isArray(e)){const o=e;let r=1;for(let l=0;l<o.length&&t>=o[l];l++)r=l+1;return Math.min(r,((i=s==null?void 0:s[a])==null?void 0:i.length)||0)}return 1},je.style=`::-webkit-scrollbar{width:9px}::-webkit-scrollbar-thumb{transition:all 400ms cubic-bezier(0.8, -0.5, 0.2, 1.4);background-color:rgb(var(--lf-color-primary))}::-webkit-scrollbar-track{background-color:rgb(var(--lf-color-bg))}[data-lf=fade-in]{display:block;animation:lf-fade-in-block 0.25s ease-out forwards}@keyframes lf-fade-in-block{from{visibility:hidden;opacity:0}to{visibility:visible;opacity:1}}:host{display:block;font-family:var(--lf-masonry-font-family, var(--lf-font-family-primary));font-size:var(--lf-masonry-font-size, var(--lf-font-size))}:host([lf-ui-size=large]){font-size:calc(
        var(--lf-masonry-font-size, var(--lf-font-size)) * var(--lf-ui-size-large)
      )}:host([lf-ui-size=medium]){font-size:calc(
        var(--lf-masonry-font-size, var(--lf-font-size)) * var(--lf-ui-size-medium)
      )}:host([lf-ui-size=small]){font-size:calc(
        var(--lf-masonry-font-size, var(--lf-font-size)) * var(--lf-ui-size-small)
      )}:host([lf-ui-size=xlarge]){font-size:calc(
        var(--lf-masonry-font-size, var(--lf-font-size)) * var(--lf-ui-size-xlarge)
      )}:host([lf-ui-size=xsmall]){font-size:calc(
        var(--lf-masonry-font-size, var(--lf-font-size)) * var(--lf-ui-size-xsmall)
      )}:host([lf-ui-size=xxlarge]){font-size:calc(
        var(--lf-masonry-font-size, var(--lf-font-size)) * var(--lf-ui-size-xxlarge)
      )}:host([lf-ui-size=xxsmall]){font-size:calc(
        var(--lf-masonry-font-size, var(--lf-font-size)) * var(--lf-ui-size-xxsmall)
      )}#lf-component{width:100%;height:100%}:host{width:100%;height:100%}:host([lf-selectable]) lf-image{transition:all 200ms cubic-bezier(0.4, 0, 0.6, 1);box-sizing:border-box;cursor:pointer;overflow:hidden}:host([lf-selectable]) lf-image:hover,:host([lf-selectable]) lf-image[data-selected=true]{filter:var(--lf-comp-selected-filter, brightness(110%) drop-shadow(0 0 0.5em rgb(var(--lf-color-secondary))))}:host([lf-selectable]) lf-image[data-selected=true]{border:var(--lf-masonry-selected-border, 1px solid rgba(var(--lf-color-secondary, 0.875)))}.masonry{width:100%;height:100%;box-sizing:border-box;display:flex;gap:var(--lf-masonry-grid-gap, 0.5em);overflow:auto;padding:var(--lf-masonry-padding, 0.75em);position:relative}.masonry:not(:hover) .grid__actions{display:none}.grid{width:100%;height:100%;align-items:var(--lf-masonry-grid-items-alignment, start);column-gap:var(--lf-masonry-grid-gap, 0.5em);display:grid;overflow-y:auto;overflow-x:hidden}.grid--horizontal{grid-template-rows:1fr;overflow-x:auto;overflow-y:hidden}.grid--horizontal .grid__column{flex-direction:row;height:100%;min-height:max-content;width:auto}.grid--main{grid-template-columns:repeat(var(--lf_masonry_columns), var(--lf-masonry-column-size, minmax(0px, 1fr)))}.grid--main .grid__column{flex-direction:column}.grid--vertical{grid-template-columns:1fr}.grid--vertical .grid__column{flex-direction:column}.grid__column{display:flex;flex:1;gap:var(--lf-masonry-grid-gap, 0.5em);width:100%}.grid__actions{bottom:var(--lf-masonry-button-bottom, 1em);display:grid;grid-auto-flow:row;grid-gap:var(--lf-masonry-grid-gap-actions, 0.5em);justify-items:center;position:absolute;right:var(--lf-masonry-button-right, 1em);z-index:var(--lf-masonry-actions-z-index, 2)}.grid__sub{display:grid;grid-gap:var(--lf-masonry-grid-gap-actions-sub, 0.25em)}`;export{Ve as lf_canvas,je as lf_masonry};
